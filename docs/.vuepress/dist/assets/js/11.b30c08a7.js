(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{282:function(t,e,s){"use strict";s.r(e);var a=s(13),n=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"ts项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ts项目"}},[t._v("#")]),t._v(" ts项目")]),t._v(" "),e("h3",{attrs:{id:"配合husky"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配合husky"}},[t._v("#")]),t._v(" 配合husky")]),t._v(" "),e("p",[e("code",[t._v('npm pkg set <command>="cmd"')]),t._v(" "),e("code",[t._v('npm pkg set scripts.prepare="husky install"')])]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" set-script prepare "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"husky install"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run prepare\n")])])]),e("p",[t._v("Add a hook:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("npx husky "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" .husky/pre-commit "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm test"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" .husky/pre-commit\n")])])]),e("p",[t._v("Make a commit:")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Keep calm and commit"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# `npm test` will run")]),t._v("\n")])])]),e("h3",{attrs:{id:"配合commitlint"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配合commitlint"}},[t._v("#")]),t._v(" 配合commitlint")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("install @commitlint/cli @commitlint/config-conventional\n")])])]),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v("npx husky "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" .husky/commit-msg "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'npx --no-install commitlint --edit \"$1\"'")]),t._v("\n")])])]),e("ul",[e("li",[t._v("husky 提交前钩子 执行lint操作")]),t._v(" "),e("li",[t._v("commitlint 规范 提交注释")])]),t._v(" "),e("h3",{attrs:{id:"例子"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#例子"}},[t._v("#")]),t._v(" 例子")]),t._v(" "),e("ul",[e("li",[t._v('type(scope?): subject  #scope is optional; multiple scopes are supported (current delimiter options: "/", "" and ",")')]),t._v(" "),e("li",[t._v("chore: some somepage")])]),t._v(" "),e("h3",{attrs:{id:"type"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[t._v("#")]),t._v(" type")]),t._v(" "),e("ul",[e("li",[t._v("build 版本")]),t._v(" "),e("li",[t._v("chore 日常")]),t._v(" "),e("li",[t._v("ci")]),t._v(" "),e("li",[t._v("docs 文档")]),t._v(" "),e("li",[t._v("feat")]),t._v(" "),e("li",[t._v("fix 修复")]),t._v(" "),e("li",[t._v("perf")]),t._v(" "),e("li",[t._v("refactor")]),t._v(" "),e("li",[t._v("revert")]),t._v(" "),e("li",[t._v("style")]),t._v(" "),e("li",[t._v("test 测试")])]),t._v(" "),e("h3",{attrs:{id:"配合-lint-staged"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配合-lint-staged"}},[t._v("#")]),t._v(" 配合 lint-staged")]),t._v(" "),e("ul",[e("li",[t._v("在代码提交之前，进行代码规则检查能够确保进入git库的代码都是符合代码规则的")]),t._v(" "),e("li",[t._v("但是整个项目上运行lint速度会很慢")]),t._v(" "),e("li",[t._v("lint-staged能够让lint只检测暂存区的文件")]),t._v(" "),e("li",[t._v("速度快\npre-commit hook 做某些事情")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("lint-staged: { '*': [command] }\n")])])]),e("h3",{attrs:{id:"配合-prettier-格式化代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配合-prettier-格式化代码"}},[t._v("#")]),t._v(" 配合 prettier 格式化代码")]),t._v(" "),e("p",[t._v("--write 格式化 修改源代码")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('pretiter: {\n  "semi": false,\n  "singleQuote": true\n}\n')])])]),e("h3",{attrs:{id:"eslint-搭配-typescript-airbnb-prettier"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#eslint-搭配-typescript-airbnb-prettier"}},[t._v("#")]),t._v(" eslint 搭配 typescript airbnb prettier")]),t._v(" "),e("h4",{attrs:{id:"npm包作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#npm包作用"}},[t._v("#")]),t._v(" npm包作用")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("eslint typescript @typescript-eslint/parser @typescript-eslint/eslint-plugin\neslint-config-airbnb eslint-config-airbnb-typescript\neslint-config-prettier eslint-plugin-prettier\n")])])]),e("ol",[e("li",[e("p",[e("code",[t._v("@typescript-eslint/parser")]),t._v(" 提取js代码供eslint检查 默认解释器为 "),e("code",[t._v("estree")]),t._v(" 与"),e("code",[t._v("@typescript-eslint/parser")]),t._v(" 兼容")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("@typescript-eslint/eslint-plugin")]),t._v(" 提供一个标准的内置rules配置 可在extends中直接使用\n"),e("code",[t._v("/eslint-recommended")]),t._v(" "),e("code",[t._v("/recommended")]),t._v(" 可能有问题 can't not resolve #/define**/* from id 问题 路径解析出问题？\neslint-config-import eslint-config-promise eslint-config-[etc]?")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("eslint-config-airbnb")]),t._v(" 提供js 检查支持（jsx也就可以）\n"),e("code",[t._v("airbnb")]),t._v(" 会包含对react的支持\n"),e("code",[t._v("airbnb/base")]),t._v(" 不会包含对react的支持")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("eslint-config-airbnb-typescript")]),t._v(" 提供对ts检查支持\n"),e("code",[t._v("airbnb-typescript")]),t._v(" 会包含react（jsx）的支持\n"),e("code",[t._v("airbnb-typescript/base")]),t._v(" 仅基础")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("eslint-config-prettier")]),t._v(" 提供对pretiier的支持(即关闭和prettier冲突的规则) = 用于禁用与prettier冲突的规则\n"),e("code",[t._v("eslint-plugin-prettier")]),t._v(" 使用prettier检查格式 = 将prettier当做eslint规则来运行\n"),e("code",[t._v("plugin:prettier/recommended")]),t._v("\n启用"),e("code",[t._v("eslint-plugin-prettier")]),t._v("\n在rules中设"),e("code",[t._v("prettier/prettier")]),t._v("为error\n继承"),e("code",[t._v("eslint-config-prettier")]),t._v("的配置")])])]),t._v(" "),e("p",[e("code",[t._v("eslint-plugin-compat")]),t._v(" 检测使用的函数是否兼容浏览器 可选")]),t._v(" "),e("h4",{attrs:{id:"配置参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置参考"}},[t._v("#")]),t._v(" 配置参考")]),t._v(" "),e("h5",{attrs:{id:"commitlint"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#commitlint"}},[t._v("#")]),t._v(" commitlint")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n  "extend": ["@commitlint/config-conventional"]\n}\n')])])]),e("h5",{attrs:{id:"eslint"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#eslint"}},[t._v("#")]),t._v(" eslint")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('  {\n  "parser": "@typescript-eslint/parser",\n  "parserOptions": {\n    "ecmaVersion": "ESNext",\n    "sourceType": "module",\n    "ecmaFeatures": {\n      "jsx": true,\n      "experimentalObjectRestSpread": true\n    },\n    "project": ["./tsconfig.json"]\n  },\n  "plugins": ["@typescript-eslint"],\n  "extends": [\n    "airbnb/base",\n    "airbnb-typescript/base",\n    "plugin:@typescript-eslint/eslint-recommended",\n    "plugin:prettier/recommended"\n  ],\n  "rules": {\n    "no-console": 0,\n    "eol-last": "error",\n    "@typescript-eslint/semi": 0,\n    "@typescript-eslint/no-explicit-any": 0,\n    "no-restricted-syntax": 0,\n    "semi": 0\n  }\n}\n')])])]),e("h5",{attrs:{id:"tsconfig"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tsconfig"}},[t._v("#")]),t._v(" tsconfig")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n  "compilerOptions": {\n    "moduleResolution": "node",\n    "target": "ESNext",\n    "module": "ESNext",\n    "lib": [ "es2015", "es2016", "es2017", "ES2018", "dom"],\n    "declaration": true,\n    "declarationDir": "dist/types",\n    "allowSyntheticDefaultImports": true,\n    "experimentalDecorators": true,\n    "emitDecoratorMetadata": true,\n    // 阻止 --noImplicitAny对缺少索引签名的索引对象报错 default false。\n    // "suppressImplicitAnyIndexErrors": true,\n    // 禁用在函数类型里对泛型签名进行严格检查 default: false\n    "noStrictGenericChecks": true,\n    "strict": true,\n    "sourceMap": false,\n    "types": [],\n    "outDir": "dist/lib"\n  },\n  "include": ["src"]\n}\n')])])]),e("h5",{attrs:{id:"lint-staged"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lint-staged"}},[t._v("#")]),t._v(" lint-staged")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('{\n   "*.ts": [\n      "prettier --write",\n      "git add"\n    ]\n}\n')])])]),e("h5",{attrs:{id:"pretiter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pretiter"}},[t._v("#")]),t._v(" pretiter")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('  "prettier": {\n    "semi": false,\n    "singleQuote": true\n  },\n')])])])])}),[],!1,null,null,null);e.default=n.exports}}]);