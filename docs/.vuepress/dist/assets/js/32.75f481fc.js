(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{302:function(t,a,s){"use strict";s.r(a);var e=s(13),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"fs-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fs-模块"}},[t._v("#")]),t._v(" fs 模块")]),t._v(" "),a("h4",{attrs:{id:"常用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用方法"}},[t._v("#")]),t._v(" 常用方法")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("flag")]),t._v(" 模式 "),a("code",[t._v("r r+ w w+ rx rx+ wx wx+")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("r+ rx+")]),t._v(" 后者如果路径存在打开失败")])]),t._v(" "),a("li",[a("p",[t._v("fd 文件描述符")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.open(path[, flag, mode], callback(err, fd))")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("stats")]),t._v(" 类 文件信息类对象")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.stat(path, callback(err, stats))")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.close(path, callback(err))")])])]),t._v(" "),a("li",[a("p",[t._v("文件描述符 存缓存数组， 从偏移量开始存， 存字节长度，从文件哪里开始读")])]),t._v(" "),a("li",[a("p",[t._v("读取字节数， 字节数缓存区")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.read(fd, buffer, offset, length, position, function(err, bytes, buff))")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.writeFile(path, data[String|Buffer], options{encoding, mode, flag}, callback(err,))")])])]),t._v(" "),a("li",[a("p",[t._v("删除文件")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.unlink(path, callback(err))")])])]),t._v(" "),a("li",[a("p",[t._v("绝对路径")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.mkdir(path, callback(err))")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.rmdir(path, callback(err))")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.readdir(path, callback(err, dir<Array-))")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("fs.rename(oldPAth, newPath, callback(err))")])])])]),t._v(" "),a("p",[t._v("// 截取文件\n"),a("code",[t._v("fs.ftruncate(fd, bytes, callback(err))")])]),t._v(" "),a("h3",{attrs:{id:"formidable-使用-处理表单文件类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#formidable-使用-处理表单文件类型"}},[t._v("#")]),t._v(" formidable 使用 处理表单文件类型")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" form "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("formidable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IncomingForm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("oprions")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" encoding "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uploadDir "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" keepExtensions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" allowEmptyFiles "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("minFileSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" maxFileSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" maxFields \n  maxFieldsSize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hashAlgorithm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fileWriteStreamHandler")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" multiples "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("filename \n  filter \n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("filter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" originalFilename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mimetype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v(" boolean\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fileds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"跨域解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#跨域解决方案"}},[t._v("#")]),t._v(" 跨域解决方案")]),t._v(" "),a("p",[t._v("图片 "),a("code",[t._v("ping")]),t._v(" 单一通信 "),a("code",[t._v("get")]),t._v(" "),a("code",[t._v("onload")]),t._v(", "),a("code",[t._v("onerror")]),t._v(" 监听数据")]),t._v(" "),a("p",[a("code",[t._v("script")]),t._v(" "),a("code",[t._v("jsonp")]),t._v(" 双向通信 "),a("code",[t._v("get")]),t._v(" 不安全 接受，出错不好处理")]),t._v(" "),a("p",[a("code",[t._v("postmessage")]),t._v(" 通信 接受消息 "),a("code",[t._v("onmessage")]),t._v(" 事件 "),a("code",[t._v("e.data postmessage")]),t._v(" 发送消息")]),t._v(" "),a("p",[a("code",[t._v("websocket")]),t._v(" 完美 持久 双向通信 只建一次连接")]),t._v(" "),a("p",[a("code",[t._v("cors")]),t._v(" 跨域资源共享 缺点 要在后端设置 允许源等 "),a("code",[t._v("cross-orign-resource-share")])]),t._v(" "),a("p",[a("code",[t._v("csrf")]),t._v(" 跨站请求违造\n"),a("code",[t._v("xsr")]),t._v(" 脚本注入攻击")])])}),[],!1,null,null,null);a.default=n.exports}}]);